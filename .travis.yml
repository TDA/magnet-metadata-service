language: objective-c
env:
    - BUILD_TYPE=android ANDROID_HOME=/usr/local/opt/android-sdk ARTIFACT=android/app/build/outputs/apk/app-release-unsigned.apk
    - BUILD_TYPE=ios
before_install:
    - brew update
    - git clone https://github.com/creationix/nvm.git /tmp/.nvm
    - source /tmp/.nvm/nvm.sh
    - nvm install 5.0
    - nvm use --delete-prefix 5.0
    - node --version && npm --version
install:
    - ./build-scripts/bootstrap.sh
script:
    - ./build-scripts/build.sh
deploy:
    provider: releases
    api_key: $GITHUB_OAUTH_TOKEN
    file: $ARTIFACT
    skip_cleanup: true
    overwrite: true
    on:
        branch: deploy-nightly-android
        tags: true
        condition: $NIGHTLY = "true"
